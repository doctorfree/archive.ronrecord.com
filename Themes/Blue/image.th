<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
#c// ###################################################################
#c// Album Theme by David Ljung Madison
#c// Design by Dave Simmer of DaveWeb.com, modified by Dave Madison
#c// -- Auto generated by simmer_theme v3.10
#c// -- From: http://MarginalHacks.com/Hacks/album/
#c// ###################################################################
#c//
<:

  # Path setting - this is the path to the images
  $PATH = Theme_URL();
  $CSS = "<link rel='stylesheet' type='text/css' href='".$PATH."/Style.css' />";

	$BODY="";
	$START_TITLE = "<span class='title'>";
	$START_MAIN = "<span class='main'>";
	$START_CREDIT = "<span class='credit'>";
	$END_FONT = "</span>";

	$SLIDESHOW = Option('slideshow');
  # Icons/graphics
  @Bar_L =	("$PATH/Bar_L.gif", 20, 20);
  @Bar_M =	("$PATH/Bar_M.gif", '100%', 20);
  @Bar_R =	("$PATH/Bar_R.gif", 20, 20);
  @Locked =	("$PATH/Locked.gif", 8, 11);
  $Icon =	{
		'_' => ["$PATH/Icon.gif",217,42],
		'fr' => ["$PATH/lang/fr/Icon.gif",235,42],
		'nl' => ["$PATH/lang/nl/Icon.gif",114,42],
		};
  $Back =	{
		'_' => ["$PATH/Back.gif",120,42],
		'fr' => ["$PATH/lang/fr/Back.gif",150,42],
		'nl' => ["$PATH/lang/nl/Back.gif",134,42],
		};
  $Next =	{
		'_' => ["$PATH/Next.gif",30,42],
		};
  $Prev =	{
		'_' => ["$PATH/Prev.gif",30,42],
		};
  $More =	{
		'_' => ["$PATH/More.gif",120,42],
		'fr' => ["$PATH/lang/fr/More.gif",150,42],
		'nl' => ["$PATH/lang/nl/More.gif",121,42],
		};
sub Bar {
  my ($colspan) = @_;
  return unless @Bar_M;
:>
			<tr>
				<td colspan='<:=$colspan:>' height="<:=$bar_H:>">
					<table cellpadding='0' cellspacing='0' width='100%'>
						<tr>
<: foreach my $bar ( \@Bar_L, \@Bar_ML, \@Bar_M, \@Bar_MR, \@Bar_R ) {
     next unless @$bar;
     my $width = $bar->[1] =~ /100%/ ? "" : " width='$bar->[1]'";
     print "\t\t\t\t\t\t\t<td $width>";
     print Image_Array(@$bar);
     print "</td>\n";
} :>
						</tr>
					</table>
				</td>
			</tr>
<:
}


  # Thumbnail border
  @Bord_L =	("$PATH/Bord_L.gif", 20, 100);
  @Bord_R =	("$PATH/Bord_R.gif", 20, 100);
  @Bord_TL =	("$PATH/Bord_TL.gif", 30, 20);
  @Bord_TR =	("$PATH/Bord_TR.gif", 30, 20);
  @Bord_BL =	("$PATH/Bord_BL.gif", 30, 20);
  @Bord_BR =	("$PATH/Bord_BR.gif", 30, 20);
  @Bord_T =	("$PATH/Bord_T.gif", 80, 20);
  @Bord_B =	("$PATH/Bord_B.gif", 80, 20);

  @Border = (\@Bord_TL,\@Bord_T,\@Bord_TR,\@Bord_RT,\@Bord_R,\@Bord_RB,\@Bord_BR,\@Bord_B,\@Bord_BL,\@Bord_LB,\@Bord_L,\@Bord_LT) unless @Border;
:>//
#c//
#c// ###################################################################
#c// Everything beyond here is the same for every DaveWeb theme..
#c// ###################################################################
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=<:=Option('charset'):>" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<: Meta() :>
		<title><:=Trans('Image:') :> <:=Name(This_Image) :></title>
    <:= $CSS :>
<: if ($SLIDESHOW) { :>
<: unless ($CSS) { :>
		<style type="text/css">
		<!--
			#SlideShowButton { font-size:75%; }
			#SlideShow { font-size:75%; }
		-->
		</style>
<: } :>
		<script type='text/javascript'>
		<!--
			var cururl=<:=Image_Page_URL():>;
			<:Set_Image_Next():>
			var strurl =  <:=Image_Page_URL():>;
			var timeout_value = 0;
			var stop_request = 0;
			var picnum = 2;
			var loopCheck ='off';

			function slideshow() {
				if (timeout_value != 0 && <:=num('pics'):>-picnum >=0) {
					setTimeout('gonext()', timeout_value*1000)
				}
			}

			function gonext() {
				var counter='';
				if (loopCheck != 'on'){
					counter ='&counter='+picnum;
				};
				this.location=strurl+'?time='+timeout_value+'&loop='+loopCheck+counter
			}

			function checkanimate() {
				if (this.location.toString().indexOf('?time=30') >= 0) {
					timeout_value=30
				} else if (this.location.toString().indexOf('?time=15') >= 0) {
					timeout_value=15
				} else if (this.location.toString().indexOf('?time=10') >= 0) {
					timeout_value=10
				} else if (this.location.toString().indexOf('?time=5') >= 0) {
					timeout_value=5
				} else if (this.location.toString().indexOf('?time=3') >= 0) {
					timeout_value=3
				} else if (this.location.toString().indexOf('?time=0') >= 0) {
					timeout_value=0
				};
				if (this.location.toString().indexOf('&loop=on') >= 0) {
					loopCheck='on'
				};
				if (this.location.toString().indexOf('&counter=') >= 0) {
					do_count();
				};
			}

			function do_count(){
				var x =this.location.toString().indexOf('&counter=');
				picnum=parseInt(this.location.toString().substring(x+9))+1;
			}

			function reset_timer() {
				timeout_value = document.SlideShow.time.options[document.SlideShow.time.selectedIndex].value;
			}

			function stopshow() {
				this.location=cururl;
			}

			function toggleLoop(){
				if( loopCheck =='on'){
					loopCheck='off'
				} else {
					loopCheck='on'
				}
			}

			function slideshowForm(){
				if (this.location.toString().indexOf('&stop=1') >= 0) {
					stopshow();
				}
				checkanimate();
				document.write("<form id=SlideShow name=SlideShow>");
				document.write("&nbsp;&nbsp; <button id=SlideShowButton>Slideshow</button>");

				document.write("<span style='white-space: nowrap'>");
				document.write("&nbsp;&nbsp;&nbsp;delay:&nbsp;");
				document.write("<select name='time' onchange='reset_timer()' size=1  style='font-size:12px;'><option value=0 ");
				if(timeout_value == 0) {document.write(" selected ");};
				document.write(">Select</option><option value=3 ");
				if(timeout_value == 3) {document.write(" selected ");};
				document.write(">3  seconds</option><option value=5");
				if(timeout_value == 5) {document.write(" selected ");};
				document.write(">5  seconds</option><option value=10 ");
				if(timeout_value == 10) {document.write(" selected ");};
				document.write(">10  seconds</option><option value=15");
				if(timeout_value == 15) {document.write(" selected ");};
				document.write(">15  seconds</option><option value=30 ");
				if(timeout_value == 30) {document.write(" selected ");};
				document.write(">30  seconds</option></select>");

				document.write("&nbsp;&nbsp;&nbsp;loop:&nbsp;");
				document.write("<input type=checkbox  name='loop'");
				if (loopCheck =='on'){document.write("checked");};
				document.write(" onclick='toggleLoop()'>");
				document.write("</span>");

				document.write("<button id=SlideShowButton name='stop' value=1>Stop</button>");
				document.write("</form>");
			}
			<: print "AddOnload(slideshow)" if ($SLIDESHOW) :>
		//-->
		</script>
<: } :>

	</head>

	<body <:=$BODY:> <:Body_Tag():> >
		<:=Image_Array("$PATH/Null.gif",1,10):>
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr valign='top'>
				<td>
<: if ($Icon) {
          print Image_Ref($Icon,"align='middle'");
					print "\n<br />\n";
   } _:>
					<:=$START_TITLE:>
					&nbsp;&nbsp;&nbsp;&nbsp;<:= Parent_Albums(':'); :>
					<:=$END_FONT:>
				</td>
<: if ($SLIDESHOW) { :>
				<td valign=bottom align=center>
					<script type='text/javascript'>
					<!--
  					slideshowForm();
					//-->
					</script>
				</td>
<: } :>
				<td>
					<div align="right">
						<a href=<:=Back():>><:print $Back ? Image_Ref($Back) : "${START_TITLE}".Trans('Back')."$END_FONT"; :></a></div>
				</td>
			</tr>
			<: Bar($SLIDESHOW ? 3 : 2) :>
		</table>
		<br />
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
#c//
#c// Prev/caption/next
#c//
			<tr valign='top'>
				<td width="25%">
<: if (my $prev = Prev(This_Image, $opt->{image_loop})) { _:>
					<div align="left">
					<:=$START_MAIN:>
					<:=Get($prev,'href','image_page','image_page'):>
          <:= $Prev ? "<span style='float: left;'>".Image_Ref($Prev)."</span>" : "(".Trans('Prev').") "; :>
					<:=Pretty(Name($prev),1):></a>
					<:=$END_FONT:>
					</div>
<: } _:>
				</td>

				<td width="50%">
					<div align="center">
						<:=$START_TITLE:>
						<:=Get(This_Image,'href','image'):>
						<:=Pretty(Name(This_Image),1,1):></a><:=$END_FONT:>

						<br />
						<:=$START_MAIN:>
						<:=Caption(This_Image):><:=$END_FONT:>
					</div>
				</td>

				<td width="25%">
<: if (my $next = Next(This_Image, $opt->{image_loop})) { _:>
					<div align="right">
					<:=$START_MAIN:>
					<:=Get($next,'href','image_page','image_page'):>
					<:= "<span style='float: right;'>".Image_Ref($Next)."</span>" if $Next :>
          <:=Pretty(Name($next),1):>
					<:= " (".Trans('Next').")" unless $Next; :>
					</a>
					<:=$END_FONT:>
					</div>
<: } _:>
				</td>
			</tr>
		</table>

		<table border="0" cellpadding="0" cellspacing="0" width="100%">

#c//
#c// The image
#c//
			<tr>
				<td valign="top" width="100%">
					<div align="center"><br />
					<: PickOverlay(This_Image, 'full') if @Overlays :>
					<: Border(This_Image,'full','image',  @Border) :>
					</div>
				</td>
			</tr>

			<tr>
				<td height="20"><:=Image_Array("$PATH/Null.gif",20,20):></td>
			</tr>

<: Bar(1) :>

			<tr>
				<td>
					<div align="center">
						<:=$START_CREDIT:><: Credit() :> on <:=scalar localtime:><:=$END_FONT:></div>
				</td>
			</tr>
			<tr>
				<td></td>
			</tr>
		</table>
		<p></p>
	</body>

</html>
